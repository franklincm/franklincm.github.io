<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>dieStats</title>
  <meta name="dieStats" content="">
  <meta name="" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="assets/css/font-awesome.min.css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="assets/css/normalize.css">
  <link rel="stylesheet" href="assets/css/skeleton.css">
  <link rel="stylesheet" href="assets/css/jquery-ui.min.css">
  <link rel="stylesheet" href="assets/css/custom.css">

  <!-- JS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script type="text/javascript" src="assets/js/jquery.js"></script>
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"></script>
  <script type="text/javascript" src="assets/js/Chart.min.js"></script>
  <script type="text/javascript" src="assets/js/chartDefaults.js"></script>
  <script type="text/javascript" src="assets/js/binomial.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- <link rel="icon" type="image/png" href="images/favicon.png"> -->

</head>
<body>
  <div class="container">
    <div class="row">
      <div class="twelve columns">
        <h1>dieStats</h1>
      </div>
    </div>
  </div>
  <div class="container main">
    <div class="row">
      <div class="eight columns graph">
        <!-- GRAPH
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <canvas id="myChart" width="400" height="400"></canvas>
      </div>
      <div class="four columns">
        <!-- CONTROLS
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <form class="controls">
          <div class="row">
            <div class="six columns">
              <label for="diceInput">Dice Pool</label>
              <input class="u-full-width" type="number" id="diceInput" value="10"/>
              <div id="slider-range-min"></div>
            </div>
            <div class="six columns">

            </div>
          </div>
          <div class="row">
            <div class="six columns">
              <label>
                <input id="disableAnim" type="checkbox">
                <span class="label-body">Disable Animation</span>
              </label>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="twelve columns">
        <span>Powered by <a href="http://www.chartjs.org/">Chart.js</a></span>
      </div>
    </div>
  </div>
  <script type="text/javascript">
   var data = {
       datasets: [
           {
               fillColor: "rgba(155, 204, 96, 0.2)",
               strokeColor: "rgba(155, 204, 96, 1)",
               pointColor: "rgba(227, 221, 201, 1)",
               pointStrokeColor: "#2d2721",
               pointHighlightFill: "#fff",
               pointHighlightStroke: "rgba(151,187,205,1)",
               data: []
           }
       ]
   };
   var options = {
       scaleShowGridLines : true,
       scaleGridLineColor : "rgba(230, 230, 230, .2)",
       scaleGridLineWidth : 1
   };
   function updatePoint(chart, dataset, point, val) {
       chart.datasets[dataset].points[point].value = val;
       chart.update();
   }

   function updateChart(chart, context, numDice) {

       data.labels = range(0,(numDice)+1).map(String);
       data.datasets[0].data = cdfGreaterThanOrEqual(numDice, 1/3).yVals;
       Chart.defaults.global.animation = !$("#disableAnim").is(":checked");

       chart = new Chart(context).Line(data, options);
       //chart.update();
   }
   $(document).ready(function() {
       // ----------------------CHART------------------------------
       var defaultDice = 10;
       var ctx = document.getElementById("myChart").getContext("2d");
       var LineChart;
       updateChart(LineChart, ctx, defaultDice);

       // ----------------------CONTROLS---------------------------

       $("#slider-range-min").slider({
           range: "min",
           value: defaultDice,
           min: 1,
           max: 50,
           slide: function (event, ui) {
               $("#diceInput").val(ui.value);
               updateChart(LineChart, ctx, ui.value);
           },
           change: function (event, ui) {
               //$("#tags").val(ui.value);
               updateChart(LineChart, ctx, ui.value);
           }
       });
       $("#diceInput").val($("#slider-range-min").slider("value"));
       $("#diceInput").change(function() {
           var newVal = $(this).val();
           if(newVal > 0 && newVal <= 50) {
               $( "#slider-range-min" ).slider( "option", "value", newVal );
           }
       });
   });
  </script>
<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
